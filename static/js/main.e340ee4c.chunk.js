(this["webpackJsonpreact-hsl"]=this["webpackJsonpreact-hsl"]||[]).push([[0],{12:function(t,e,n){},13:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var s=n(1),r=n.n(s),a=n(3),i=n.n(a),o=(n(12),n(4)),c=n(5),h=n(7),l=n(6),d=(n(13),n(0));function u(t){return t.charAt(0)+t.slice(1).toLowerCase()}var j=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).get_timetables=function(){fetch("https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql",{method:"POST",headers:{"Content-Type":"application/graphql"},body:"{ plan(\n          from: {lat: 60.2716403915943, lon: 24.84663514090327}\n          to: {lat: 60.169301684811906, lon: 24.93325791874904}\n          numItineraries: 6\n          transportModes: [{mode: BUS}, {mode: RAIL}, {mode:TRAM}, {mode: SUBWAY}, {mode:WALK}]\n        ) {\n          itineraries{\n            walkDistance,\n            duration,\n            legs {\n              mode\n              startTime\n              endTime\n              from {\n                name\n                stop {\n                  code\n                  name\n                }\n              },\n              to {\n                name\n              },\n              trip {\n                tripHeadsign\n                routeShortName\n              },\n              distance\n            }\n          }\n        }\n      }"}).then((function(t){return t.json()})).then((function(t){for(var e=t.data.plan.itineraries,n=[],r=[],a=[],i=[],o=[],c=[],h=0;h<e.length;h++){n.push(u(e[h].legs[0].mode));var l=new Date(e[h].legs[0].startTime),d=l.getHours(),j="0"+l.getMinutes();r.push(d+":"+j.substr(-2)),o.push(e[h].legs[0].to.name),e[h].legs.length>1?(a.push(u(e[h].legs[1].mode)),d=(l=new Date(e[h].legs[1].startTime)).getHours(),j="0"+l.getMinutes(),i.push(d+":"+j.substr(-2)),c.push(e[h].legs[1].trip.routeShortName+", "+e[h].legs[1].trip.tripHeadsign)):(a.push("End"),i.push("End"),c.push("End"))}s.setState({start:n,startTimes:r,destinations:o,next:a,nextTimes:i,transIDs:c})}))},s.createTable=function(){for(var t=[],e=0;e<s.state.start.length;e++){var n=[];n.push(Object(d.jsx)("td",{children:s.state.startTimes[e]})),n.push(Object(d.jsx)("td",{children:s.state.start[e]})),n.push(Object(d.jsx)("td",{children:s.state.destinations[e]})),n.push(Object(d.jsx)("td",{children:s.state.nextTimes[e]})),n.push(Object(d.jsx)("td",{children:s.state.next[e]})),n.push(Object(d.jsx)("td",{children:s.state.transIDs[e]})),t.push(Object(d.jsx)("tr",{children:n}))}return t},s.state={start:[],startTimes:[],destinations:[],next:[],nextTimes:[],transIDs:[]},s}return Object(c.a)(n,[{key:"render",value:function(){this.get_timetables();var t=new Date,e=t.getMinutes(),n="";e<10&&(n="0");var s=t.getHours()+":"+n+e;return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/uikit@3.3.0/dist/css/uikit.min.css"}),Object(d.jsx)("h1",{children:"Kuohukuja public transport timetable"}),Object(d.jsxs)("h2",{children:["Current time: ",s]}),Object(d.jsxs)("table",{className:"uk-table-striped",align:"center",children:[Object(d.jsx)("caption",{}),Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Leave home"}),Object(d.jsx)("th",{children:"Method"}),Object(d.jsx)("th",{children:"Transportation from"}),Object(d.jsx)("th",{children:"Departure time"}),Object(d.jsx)("th",{children:"Transportation method"}),Object(d.jsx)("th",{children:"Transportation ID"})]})}),Object(d.jsx)("tbody",{children:this.createTable()})]})]})}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(d.jsx)(j,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.e340ee4c.chunk.js.map